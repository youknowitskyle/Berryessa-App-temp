{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = require(\"react\");\n\nvar makeUrls_1 = require(\"./makeUrls\");\n\nvar useAutoFocus = function () {\n  var elementRef = React.useRef(null);\n  React.useEffect(function () {\n    var previous = document.activeElement;\n    var element = elementRef.current;\n\n    if (element) {\n      element.focus();\n    }\n\n    if (previous instanceof HTMLElement) {\n      return function () {\n        return previous.focus();\n      };\n    }\n\n    return undefined;\n  }, []);\n  return elementRef;\n};\n\nvar useOpenState = function (initialOpen) {\n  var _a = React.useState(initialOpen),\n      open = _a[0],\n      setOpen = _a[1];\n\n  var onToggle = function () {\n    return setOpen(function (current) {\n      return !current;\n    });\n  };\n\n  React.useEffect(function () {\n    if (open) {\n      var onClose_1 = function () {\n        return setOpen(false);\n      };\n\n      document.addEventListener(\"click\", onClose_1);\n      return function () {\n        return document.removeEventListener(\"click\", onClose_1);\n      };\n    }\n\n    return undefined;\n  }, [open, setOpen]);\n  return [open, onToggle];\n};\n\nvar Calendar = React.forwardRef(function (_a, ref) {\n  var children = _a.children,\n      _b = _a.download,\n      download = _b === void 0 ? false : _b,\n      href = _a.href;\n  return React.createElement(\"a\", {\n    ref: ref,\n    download: download,\n    href: href,\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, children);\n});\n\nvar Dropdown = function (_a) {\n  var onToggle = _a.onToggle,\n      urls = _a.urls;\n  var ref = useAutoFocus();\n\n  var onKeyDown = function (event) {\n    if (event.key === \"Escape\") {\n      onToggle();\n    }\n  };\n\n  return React.createElement(\"div\", {\n    className: \"chq-atc--dropdown\",\n    onKeyDown: onKeyDown,\n    role: \"presentation\"\n  }, React.createElement(Calendar, {\n    href: urls.ics,\n    download: true,\n    ref: ref\n  }, \"Apple Calendar\"), React.createElement(Calendar, {\n    href: urls.google\n  }, \"Google\"), React.createElement(Calendar, {\n    href: urls.ics,\n    download: true\n  }, \"Outlook\"), React.createElement(Calendar, {\n    href: urls.outlook\n  }, \"Outlook Web App\"), React.createElement(Calendar, {\n    href: urls.yahoo\n  }, \"Yahoo\"));\n};\n\nvar AddToCalendar = function (_a) {\n  var _b = _a.children,\n      children = _b === void 0 ? \"Add to My Calendar\" : _b,\n      event = _a.event,\n      _c = _a.open,\n      initialOpen = _c === void 0 ? false : _c;\n\n  var _d = useOpenState(initialOpen),\n      open = _d[0],\n      onToggle = _d[1];\n\n  var urls = React.useMemo(function () {\n    return makeUrls_1.default(event);\n  }, [event]);\n  return React.createElement(\"div\", {\n    className: \"chq-atc\"\n  }, event && React.createElement(\"button\", {\n    type: \"button\",\n    className: \"chq-atc--button\",\n    onClick: onToggle\n  }, React.createElement(\"svg\", {\n    width: \"20px\",\n    height: \"20px\",\n    viewBox: \"0 0 1024 1024\"\n  }, React.createElement(\"path\", {\n    d: \"M704 192v-64h-32v64h-320v-64h-32v64h-192v704h768v-704h-192z M864 864h-704v-480h704v480z M864 352h-704v-128h160v64h32v-64h320v64h32v-64h160v128z\"\n  })), \" \", children), open && React.createElement(Dropdown, {\n    onToggle: onToggle,\n    urls: urls\n  }));\n};\n\nexports.default = AddToCalendar;","map":null,"metadata":{},"sourceType":"script"}