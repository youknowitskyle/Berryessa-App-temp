{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\moonl\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\moonl\\\\Documents\\\\GitHub\\\\Berryessa-App\\\\react\\\\src\\\\components\\\\Admin\\\\index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from \"react\";\nimport { Switch, Route, Link } from \"react-router-dom\";\nimport { compose } from \"recompose\";\nimport Popup from \"reactjs-popup\";\nimport { withFirebase } from \"../Firebase\";\nimport { AuthUserContext, withAuthorization } from \"../Session\";\nimport * as ROLES from \"../../constants/roles\";\nimport * as ROUTES from \"../../constants/routes\";\nimport { PrayersBase, PrayerList } from \"../Prayer\";\n\nconst AdminPage = () => React.createElement(\"div\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 14\n  },\n  __self: this\n}, React.createElement(\"h1\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 15\n  },\n  __self: this\n}, \"Admin\"), React.createElement(\"p\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 16\n  },\n  __self: this\n}, \"The Admin Page is accessible by every signed in admin user.\"), React.createElement(PrayerRequest, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 17\n  },\n  __self: this\n}), React.createElement(Switch, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 18\n  },\n  __self: this\n}, React.createElement(Route, {\n  exact: true,\n  path: ROUTES.ADMIN_DETAILS,\n  component: UserItem,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 19\n  },\n  __self: this\n}), React.createElement(Route, {\n  exact: true,\n  path: ROUTES.ADMIN,\n  component: UserList,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 20\n  },\n  __self: this\n})));\n\nclass UserListBase extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n      users: []\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      loading: true\n    });\n    this.props.firebase.users().on(\"value\", snapshot => {\n      const usersObject = snapshot.val();\n      const usersList = Object.keys(usersObject).map(key => _objectSpread({}, usersObject[key], {\n        uid: key\n      }));\n      this.setState({\n        users: usersList,\n        loading: false\n      });\n    });\n  }\n\n  componentWillUnmount() {\n    this.props.firebase.users().off();\n  }\n\n  render() {\n    const _this$state = this.state,\n          users = _this$state.users,\n          loading = _this$state.loading;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, \"Users\"), loading && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, \"Loading...\"), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, users.map(user => React.createElement(\"li\", {\n      key: user.uid,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \"ID:\"), \" \", user.uid), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, \" | E-Mail:\"), \" \", user.email), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \" | Username:\"), \" \", user.username), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, \" | Approved: \"), \" \", user.roles.APPROVED ? React.createElement(\"span\", {\n      style: {\n        color: \"green\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, \"TRUE\") : React.createElement(\"span\", {\n      style: {\n        color: \"red\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \"FALSE\")), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \" | Parent: \"), \" \", user.roles.PARENT ? React.createElement(\"span\", {\n      style: {\n        color: \"green\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"TRUE\") : React.createElement(\"span\", {\n      style: {\n        color: \"red\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"FALSE\")), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \" | Soft Banned: \"), \" \", user.roles.PROBATION ? React.createElement(\"span\", {\n      style: {\n        color: \"green\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, \"TRUE\") : React.createElement(\"span\", {\n      style: {\n        color: \"red\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \"FALSE\")), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: {\n        pathname: \"\".concat(ROUTES.ADMIN, \"/\").concat(user.uid),\n        state: {\n          user\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, \" \", \"Details\")), React.createElement(Popup, {\n      trigger: React.createElement(\"button\", {\n        className: \"button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \" Details \"),\n      modal: true,\n      closeOnDocumentClick: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(UserItem, {\n      user: user,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }))))));\n  }\n\n}\n\nclass UserItemBase extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onSendPasswordResetEmail = () => {\n      this.props.firebase.doPasswordReset(this.state.user.email);\n      this.setState({\n        sentReset: true\n      });\n    };\n\n    this.onBanUser = () => {\n      this.props.firebase.db.ref(\"users/\".concat(this.props.match.params.id, \"/roles/\")).set({\n        BANNED: \"BANNED\"\n      });\n      this.setState({\n        banned: true\n      });\n    };\n\n    this.onSoftBanUser = () => {\n      this.props.firebase.db.ref(\"users/\".concat(this.props.match.params.id, \"/roles/\")).update({\n        PROBATION: \"PROBATION\"\n      });\n      this.setState({\n        probation: true\n      });\n    };\n\n    this.onApproveUser = () => {\n      this.props.firebase.db.ref(\"users/\".concat(this.props.match.params.id, \"/roles/\")).update({\n        APPROVED: \"APPROVED\"\n      });\n      this.setState({\n        approved: true\n      });\n    };\n\n    this.state = {\n      loading: false,\n      user: this.props.user,\n      sentReset: false,\n      approved: false,\n      banned: false,\n      probation: false,\n      openBan: false,\n      openSoftBan: false //...props.location.state\n\n    };\n  }\n\n  componentDidMount() {\n    if (this.state.user) {\n      this.setState({\n        approved: this.state.user.roles.APPROVED,\n        banned: this.state.user.roles.BANNED,\n        probation: this.state.user.roles.PROBATION\n      });\n      return;\n    }\n\n    this.setState({\n      loading: true\n    });\n    this.props.firebase.user(this.props.match.params.id).on(\"value\", snapshot => {\n      this.setState({\n        user: snapshot.val(),\n        loading: false,\n        approved: snapshot.val().roles.APPROVED,\n        banned: snapshot.val().roles.BANNED,\n        probation: snapshot.val().roles.PROBATION\n      });\n    });\n    this.setState({\n      approved: this.state.user.roles.APPROVED,\n      banned: this.state.user.roles.BANNED,\n      probation: this.state.user.roles.PROBATION\n    });\n  }\n\n  componentWillUnmount() {\n    this.props.firebase.user(this.props.match.params.id).off();\n  }\n\n  render() {\n    const _this$state2 = this.state,\n          user = _this$state2.user,\n          loading = _this$state2.loading;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, \"User: \", user.username), loading && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, \"Loading ...\"), user && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, \"ID: \"), \" \", this.props.match.params.id), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, \" | E-Mail:\"), \" \", user.email), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, \" | Username:\"), \" \", user.username), React.createElement(\"span\", {\n      style: {\n        padding: \"5px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, !this.state.approved && !this.state.banned && React.createElement(\"button\", {\n      type: \"button\",\n      onClick: this.onApproveUser,\n      style: {\n        backgroundColor: \"green\",\n        color: \"white\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, \"Approve User\")), this.state.probation && React.createElement(\"span\", {\n      style: {\n        padding: \"5px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      onClick: () => {\n        this.props.firebase.db.ref(\"users/\".concat(this.props.match.params.id, \"/roles/PROBATION\")).remove();\n        this.setState({\n          probation: false\n        });\n      },\n      style: {\n        backgroundColor: \"green\",\n        color: \"white\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }, \"Remove From Probation\")), !!this.state.approved && !this.state.banned && !this.state.probation && React.createElement(\"span\", {\n      style: {\n        padding: \"5px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      onClick: () => {\n        this.setState({\n          openSoftBan: true\n        });\n      },\n      style: {\n        backgroundColor: \"fuchsia\",\n        color: \"white\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275\n      },\n      __self: this\n    }, \"Soft Ban\"), React.createElement(Popup, {\n      modal: true,\n      closeOnDocumentClick: true,\n      open: this.state.openSoftBan,\n      onClose: () => {\n        this.setState({\n          openSoftBan: false\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        textAlign: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297\n      },\n      __self: this\n    }, \"Are you sure you would like to put this user on probation? They will no longer be able to submit prayer requests and messages.\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        textAlign: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      onClick: () => {\n        this.props.firebase.db.ref(\"users/\".concat(this.props.match.params.id, \"/roles/\")).update({\n          PROBATION: \"PROBATION\"\n        });\n        this.setState({\n          probation: true,\n          openSoftBan: false\n        });\n      },\n      style: {\n        backgroundColor: \"fuchsia\",\n        color: \"white\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304\n      },\n      __self: this\n    }, \"Soft Ban User\")), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323\n      },\n      __self: this\n    }))), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327\n      },\n      __self: this\n    }, this.state.banned ? React.createElement(\"strong\", {\n      style: {\n        color: \"red\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329\n      },\n      __self: this\n    }, \"BANNED\") : React.createElement(\"span\", {\n      style: {\n        padding: \"5px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      onClick: () => {\n        this.setState({\n          openBan: true\n        });\n      },\n      style: {\n        backgroundColor: \"red\",\n        color: \"white\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332\n      },\n      __self: this\n    }, \"Ban User\"), React.createElement(Popup, {\n      modal: true,\n      closeOnDocumentClick: true,\n      open: this.state.openBan,\n      onClose: () => {\n        this.setState({\n          openBan: false\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        textAlign: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353\n      },\n      __self: this\n    }, \"Are you sure you would like to ban this user? This action is irreversible.\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        textAlign: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      onClick: () => {\n        this.props.firebase.db.ref(\"users/\".concat(this.props.match.params.id, \"/roles/\")).set({\n          BANNED: \"BANNED\"\n        });\n        this.setState({\n          banned: true,\n          openBan: false\n        });\n      },\n      style: {\n        backgroundColor: \"red\",\n        color: \"white\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359\n      },\n      __self: this\n    }, \"Ban User\")), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 376\n      },\n      __self: this\n    }))))));\n  }\n\n}\n\nclass PrayerRequestBase extends PrayersBase {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const _this$state3 = this.state,\n          prayers = _this$state3.prayers,\n          loading = _this$state3.loading;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 398\n      },\n      __self: this\n    }, \"Prayer Requests\"), React.createElement(AuthUserContext.Consumer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399\n      },\n      __self: this\n    }, authUser => React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 401\n      },\n      __self: this\n    }, !loading && prayers && React.createElement(\"button\", {\n      type: \"button\",\n      onClick: this.onNextPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 404\n      },\n      __self: this\n    }, \"More\"), loading && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 409\n      },\n      __self: this\n    }, \"Loading ...\"), prayers ? React.createElement(PrayerList, {\n      authUser: authUser,\n      prayers: prayers,\n      onEditPrayer: this.onEditPrayer,\n      onRemovePrayer: this.onRemovePrayer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 412\n      },\n      __self: this\n    }) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 419\n      },\n      __self: this\n    }, \"There are no prayer requests ...\"))));\n  }\n\n}\n\nconst condition = authUser => authUser && !!authUser.roles[ROLES.ADMIN];\n\nconst UserList = withFirebase(UserListBase);\nconst UserItem = withFirebase(UserItemBase);\nconst PrayerRequest = withFirebase(PrayerRequestBase);\n/*const UserItem = ({ match }) => (\r\n  <div>\r\n    <h2>User ({match.params.id})</h2>\r\n  </div>\r\n);*/\n\nexport default compose(withAuthorization(condition), withFirebase)(AdminPage);","map":{"version":3,"sources":["C:\\Users\\moonl\\Documents\\GitHub\\Berryessa-App\\react\\src\\components\\Admin\\index.js"],"names":["React","Component","Switch","Route","Link","compose","Popup","withFirebase","AuthUserContext","withAuthorization","ROLES","ROUTES","PrayersBase","PrayerList","AdminPage","ADMIN_DETAILS","UserItem","ADMIN","UserList","UserListBase","constructor","props","state","loading","users","componentDidMount","setState","firebase","on","snapshot","usersObject","val","usersList","Object","keys","map","key","uid","componentWillUnmount","off","render","user","email","username","roles","APPROVED","color","PARENT","PROBATION","pathname","UserItemBase","onSendPasswordResetEmail","doPasswordReset","sentReset","onBanUser","db","ref","match","params","id","set","BANNED","banned","onSoftBanUser","update","probation","onApproveUser","approved","openBan","openSoftBan","padding","backgroundColor","remove","textAlign","PrayerRequestBase","prayers","authUser","onNextPage","onEditPrayer","onRemovePrayer","condition","PrayerRequest"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Switch, Route, Link } from \"react-router-dom\";\r\nimport { compose } from \"recompose\";\r\nimport Popup from \"reactjs-popup\";\r\n\r\nimport { withFirebase } from \"../Firebase\";\r\nimport { AuthUserContext, withAuthorization } from \"../Session\";\r\nimport * as ROLES from \"../../constants/roles\";\r\nimport * as ROUTES from \"../../constants/routes\";\r\n\r\nimport { PrayersBase, PrayerList } from \"../Prayer\";\r\n\r\nconst AdminPage = () => (\r\n  <div>\r\n    <h1>Admin</h1>\r\n    <p>The Admin Page is accessible by every signed in admin user.</p>\r\n    <PrayerRequest />\r\n    <Switch>\r\n      <Route exact path={ROUTES.ADMIN_DETAILS} component={UserItem} />\r\n      <Route exact path={ROUTES.ADMIN} component={UserList} />\r\n    </Switch>\r\n  </div>\r\n);\r\n\r\nclass UserListBase extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      loading: false,\r\n      users: []\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ loading: true });\r\n\r\n    this.props.firebase.users().on(\"value\", snapshot => {\r\n      const usersObject = snapshot.val();\r\n\r\n      const usersList = Object.keys(usersObject).map(key => ({\r\n        ...usersObject[key],\r\n        uid: key\r\n      }));\r\n\r\n      this.setState({\r\n        users: usersList,\r\n        loading: false\r\n      });\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.firebase.users().off();\r\n  }\r\n\r\n  render() {\r\n    const { users, loading } = this.state;\r\n\r\n    return (\r\n      <div>\r\n        <h2>Users</h2>\r\n        {loading && <div>Loading...</div>}\r\n\r\n        <ul>\r\n          {users.map(user => (\r\n            <li key={user.uid}>\r\n              <span>\r\n                <strong>ID:</strong> {user.uid}\r\n              </span>\r\n              <span>\r\n                <strong> | E-Mail:</strong> {user.email}\r\n              </span>\r\n              <span>\r\n                <strong> | Username:</strong> {user.username}\r\n              </span>\r\n              <span>\r\n                <strong> | Approved: </strong>{\" \"}\r\n                {user.roles.APPROVED ? (\r\n                  <span style={{ color: \"green\" }}>TRUE</span>\r\n                ) : (\r\n                  <span style={{ color: \"red\" }}>FALSE</span>\r\n                )}\r\n              </span>\r\n              <span>\r\n                <strong> | Parent: </strong>{\" \"}\r\n                {user.roles.PARENT ? (\r\n                  <span style={{ color: \"green\" }}>TRUE</span>\r\n                ) : (\r\n                  <span style={{ color: \"red\" }}>FALSE</span>\r\n                )}\r\n              </span>\r\n              <span>\r\n                <strong> | Soft Banned: </strong>{\" \"}\r\n                {user.roles.PROBATION ? (\r\n                  <span style={{ color: \"green\" }}>TRUE</span>\r\n                ) : (\r\n                  <span style={{ color: \"red\" }}>FALSE</span>\r\n                )}\r\n              </span>\r\n              <span>\r\n                <Link\r\n                  to={{\r\n                    pathname: `${ROUTES.ADMIN}/${user.uid}`,\r\n                    state: { user }\r\n                  }}\r\n                >\r\n                  {\" \"}\r\n                  Details\r\n                </Link>\r\n              </span>\r\n              <Popup\r\n                trigger={<button className=\"button\"> Details </button>}\r\n                modal\r\n                closeOnDocumentClick\r\n              >\r\n                <UserItem user={user} />\r\n              </Popup>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass UserItemBase extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      loading: false,\r\n      user: this.props.user,\r\n      sentReset: false,\r\n      approved: false,\r\n      banned: false,\r\n      probation: false,\r\n      openBan: false,\r\n      openSoftBan: false\r\n      //...props.location.state\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.state.user) {\r\n      this.setState({\r\n        approved: this.state.user.roles.APPROVED,\r\n        banned: this.state.user.roles.BANNED,\r\n        probation: this.state.user.roles.PROBATION\r\n      });\r\n      return;\r\n    }\r\n\r\n    this.setState({ loading: true });\r\n\r\n    this.props.firebase\r\n      .user(this.props.match.params.id)\r\n      .on(\"value\", snapshot => {\r\n        this.setState({\r\n          user: snapshot.val(),\r\n          loading: false,\r\n          approved: snapshot.val().roles.APPROVED,\r\n          banned: snapshot.val().roles.BANNED,\r\n          probation: snapshot.val().roles.PROBATION\r\n        });\r\n      });\r\n\r\n    this.setState({\r\n      approved: this.state.user.roles.APPROVED,\r\n      banned: this.state.user.roles.BANNED,\r\n      probation: this.state.user.roles.PROBATION\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.firebase.user(this.props.match.params.id).off();\r\n  }\r\n\r\n  onSendPasswordResetEmail = () => {\r\n    this.props.firebase.doPasswordReset(this.state.user.email);\r\n    this.setState({\r\n      sentReset: true\r\n    });\r\n  };\r\n\r\n  onBanUser = () => {\r\n    this.props.firebase.db\r\n      .ref(`users/${this.props.match.params.id}/roles/`)\r\n      .set({ BANNED: \"BANNED\" });\r\n\r\n    this.setState({ banned: true });\r\n  };\r\n\r\n  onSoftBanUser = () => {\r\n    this.props.firebase.db\r\n      .ref(`users/${this.props.match.params.id}/roles/`)\r\n      .update({ PROBATION: \"PROBATION\" });\r\n    this.setState({ probation: true });\r\n  };\r\n\r\n  onApproveUser = () => {\r\n    this.props.firebase.db\r\n      .ref(`users/${this.props.match.params.id}/roles/`)\r\n      .update({ APPROVED: \"APPROVED\" });\r\n\r\n    this.setState({\r\n      approved: true\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { user, loading } = this.state;\r\n\r\n    return (\r\n      <div>\r\n        <h2>User: {user.username}</h2>\r\n        {loading && <div>Loading ...</div>}\r\n\r\n        {user && (\r\n          <div>\r\n            <span>\r\n              <strong>ID: </strong> {this.props.match.params.id}\r\n            </span>\r\n            <span>\r\n              <strong> | E-Mail:</strong> {user.email}\r\n            </span>\r\n            <span>\r\n              <strong> | Username:</strong> {user.username}\r\n            </span>\r\n            <span style={{ padding: \"5px\" }}>\r\n              {!this.state.approved &&\r\n                !this.state.banned && (\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={this.onApproveUser}\r\n                    style={{\r\n                      backgroundColor: \"green\",\r\n                      color: \"white\"\r\n                    }}\r\n                  >\r\n                    Approve User\r\n                  </button>\r\n                )}\r\n            </span>\r\n            {/* <span>\r\n              <button type=\"button\" onClick={this.onSendPasswordResetEmail}>\r\n                Send Password Reset\r\n              </button>\r\n              {this.state.sentReset && (\r\n                <div style={{ color: \"red\" }}>Password reset sent</div>\r\n              )}\r\n            </span> */}\r\n            {this.state.probation && (\r\n              <span style={{ padding: \"5px\" }}>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    this.props.firebase.db\r\n                      .ref(\r\n                        `users/${this.props.match.params.id}/roles/PROBATION`\r\n                      )\r\n                      .remove();\r\n                    this.setState({ probation: false });\r\n                  }}\r\n                  style={{ backgroundColor: \"green\", color: \"white\" }}\r\n                >\r\n                  Remove From Probation\r\n                </button>\r\n              </span>\r\n            )}\r\n            {!!this.state.approved &&\r\n              !this.state.banned &&\r\n              !this.state.probation && (\r\n                <span style={{ padding: \"5px\" }}>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      this.setState({ openSoftBan: true });\r\n                    }}\r\n                    style={{\r\n                      backgroundColor: \"fuchsia\",\r\n                      color: \"white\"\r\n                    }}\r\n                  >\r\n                    Soft Ban\r\n                  </button>\r\n\r\n                  <Popup\r\n                    modal\r\n                    closeOnDocumentClick\r\n                    open={this.state.openSoftBan}\r\n                    onClose={() => {\r\n                      this.setState({ openSoftBan: false });\r\n                    }}\r\n                  >\r\n                    <br />\r\n                    <div style={{ textAlign: \"center\" }}>\r\n                      Are you sure you would like to put this user on probation?\r\n                      They will no longer be able to submit prayer requests and\r\n                      messages.\r\n                    </div>\r\n                    <br />\r\n                    <div style={{ textAlign: \"center\" }}>\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => {\r\n                          this.props.firebase.db\r\n                            .ref(`users/${this.props.match.params.id}/roles/`)\r\n                            .update({ PROBATION: \"PROBATION\" });\r\n                          this.setState({\r\n                            probation: true,\r\n                            openSoftBan: false\r\n                          });\r\n                        }}\r\n                        style={{\r\n                          backgroundColor: \"fuchsia\",\r\n                          color: \"white\"\r\n                        }}\r\n                      >\r\n                        Soft Ban User\r\n                      </button>\r\n                    </div>\r\n                    <br />\r\n                  </Popup>\r\n                </span>\r\n              )}\r\n            <span>\r\n              {this.state.banned ? (\r\n                <strong style={{ color: \"red\" }}>BANNED</strong>\r\n              ) : (\r\n                <span style={{ padding: \"5px\" }}>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      this.setState({ openBan: true });\r\n                    }}\r\n                    style={{\r\n                      backgroundColor: \"red\",\r\n                      color: \"white\"\r\n                    }}\r\n                  >\r\n                    Ban User\r\n                  </button>\r\n                  <Popup\r\n                    modal\r\n                    closeOnDocumentClick\r\n                    open={this.state.openBan}\r\n                    onClose={() => {\r\n                      this.setState({ openBan: false });\r\n                    }}\r\n                  >\r\n                    <br />\r\n                    <div style={{ textAlign: \"center\" }}>\r\n                      Are you sure you would like to ban this user? This action\r\n                      is irreversible.\r\n                    </div>\r\n                    <br />\r\n                    <div style={{ textAlign: \"center\" }}>\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => {\r\n                          this.props.firebase.db\r\n                            .ref(`users/${this.props.match.params.id}/roles/`)\r\n                            .set({ BANNED: \"BANNED\" });\r\n\r\n                          this.setState({ banned: true, openBan: false });\r\n                        }}\r\n                        style={{\r\n                          backgroundColor: \"red\",\r\n                          color: \"white\"\r\n                        }}\r\n                      >\r\n                        Ban User\r\n                      </button>\r\n                    </div>\r\n                    <br />\r\n                  </Popup>\r\n                </span>\r\n              )}\r\n            </span>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass PrayerRequestBase extends PrayersBase {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    const { prayers, loading } = this.state;\r\n\r\n    return (\r\n      <div>\r\n        <h2>Prayer Requests</h2>\r\n        <AuthUserContext.Consumer>\r\n          {authUser => (\r\n            <div>\r\n              {!loading &&\r\n                prayers && (\r\n                  <button type=\"button\" onClick={this.onNextPage}>\r\n                    More\r\n                  </button>\r\n                )}\r\n\r\n              {loading && <div>Loading ...</div>}\r\n\r\n              {prayers ? (\r\n                <PrayerList\r\n                  authUser={authUser}\r\n                  prayers={prayers}\r\n                  onEditPrayer={this.onEditPrayer}\r\n                  onRemovePrayer={this.onRemovePrayer}\r\n                />\r\n              ) : (\r\n                <div>There are no prayer requests ...</div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </AuthUserContext.Consumer>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst condition = authUser => authUser && !!authUser.roles[ROLES.ADMIN];\r\n\r\nconst UserList = withFirebase(UserListBase);\r\nconst UserItem = withFirebase(UserItemBase);\r\n\r\nconst PrayerRequest = withFirebase(PrayerRequestBase);\r\n\r\n/*const UserItem = ({ match }) => (\r\n  <div>\r\n    <h2>User ({match.params.id})</h2>\r\n  </div>\r\n);*/\r\n\r\nexport default compose(withAuthorization(condition), withFirebase)(AdminPage);\r\n"]},"metadata":{},"sourceType":"module"}