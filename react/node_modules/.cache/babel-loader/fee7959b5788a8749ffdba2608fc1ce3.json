{"ast":null,"code":"import _objectWithoutProperties from \"C:\\\\Users\\\\moonl\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"C:\\\\Users\\\\moonl\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\moonl\\\\Documents\\\\GitHub\\\\Berryessa-App\\\\react\\\\src\\\\components\\\\Admin\\\\index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from \"react\";\nimport { Switch, Route, Link } from \"react-router-dom\";\nimport { compose } from \"recompose\";\nimport { withFirebase } from \"../Firebase\";\nimport { AuthUserContext, withAuthorization } from \"../Session\";\nimport * as ROLES from \"../../constants/roles\";\nimport * as ROUTES from \"../../constants/routes\";\nimport { PrayerList } from \"../Prayer\";\n\nconst AdminPage = () => React.createElement(\"div\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 13\n  },\n  __self: this\n}, React.createElement(\"h1\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 14\n  },\n  __self: this\n}, \"Admin\"), React.createElement(\"p\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 15\n  },\n  __self: this\n}, \"The Admin Page is accessible by every signed in admin user.\"), React.createElement(PrayersBase, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 16\n  },\n  __self: this\n}), React.createElement(Switch, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 17\n  },\n  __self: this\n}, React.createElement(Route, {\n  exact: true,\n  path: ROUTES.ADMIN_DETAILS,\n  component: UserItem,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 18\n  },\n  __self: this\n}), React.createElement(Route, {\n  exact: true,\n  path: ROUTES.ADMIN,\n  component: UserList,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 19\n  },\n  __self: this\n})));\n\nclass UserListBase extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n      users: []\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      loading: true\n    });\n    this.props.firebase.users().on(\"value\", snapshot => {\n      const usersObject = snapshot.val();\n      const usersList = Object.keys(usersObject).map(key => _objectSpread({}, usersObject[key], {\n        uid: key\n      }));\n      this.setState({\n        users: usersList,\n        loading: false\n      });\n    });\n  }\n\n  componentWillUnmount() {\n    this.props.firebase.users().off();\n  }\n\n  render() {\n    const _this$state = this.state,\n          users = _this$state.users,\n          loading = _this$state.loading;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, \"Users\"), loading && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, \"Loading...\"), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, users.map(user => React.createElement(\"li\", {\n      key: user.uid,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"ID:\"), \" \", user.uid), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \" | E-Mail:\"), \" \", user.email), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \" | Username:\"), \" \", user.username), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \" | Approved: \"), \" \", user.roles.APPROVED ? React.createElement(\"div\", {\n      style: {\n        color: \"green\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"TRUE\") : React.createElement(\"div\", {\n      style: {\n        color: \"red\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, \"FALSE\")), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: {\n        pathname: \"\".concat(ROUTES.ADMIN, \"/\").concat(user.uid),\n        state: {\n          user\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \" \", \"Details\"))))));\n  }\n\n}\n\nclass UserItemBase extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onSendPasswordResetEmail = () => {\n      this.props.firebase.doPasswordReset(this.state.user.email);\n      this.setState({\n        sentReset: true\n      });\n    };\n\n    this.onApproveUser = () => {\n      this.props.firebase.db.ref(\"users/\".concat(this.props.match.params.id, \"/roles/\")).update({\n        APPROVED: \"APPROVED\"\n      });\n      this.setState({\n        approved: true\n      });\n    };\n\n    this.state = _objectSpread({\n      loading: false,\n      user: null,\n      sentReset: false,\n      approved: false\n    }, props.location.state);\n  }\n\n  componentDidMount() {\n    console.log(\"hello\");\n\n    if (this.state.user) {\n      this.setState({\n        approved: this.state.user.roles.APPROVED\n      });\n      return;\n    }\n\n    this.setState({\n      loading: true\n    });\n    this.props.firebase.user(this.props.match.params.id).on(\"value\", snapshot => {\n      this.setState({\n        user: snapshot.val(),\n        loading: false,\n        approved: snapshot.val().roles.APPROVED\n      });\n    });\n    this.setState({\n      approved: this.state.user.roles.APPROVED\n    });\n  }\n\n  componentWillUnmount() {\n    this.props.firebase.user(this.props.match.params.id).off();\n  }\n\n  render() {\n    const _this$state2 = this.state,\n          user = _this$state2.user,\n          loading = _this$state2.loading;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, \"User (\", this.props.match.params.id, \")\"), loading && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, \"Loading ...\"), user && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, \"ID: \"), \" \", this.props.match.params.id), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, \" | E-Mail:\"), \" \", user.email), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \" | Username:\"), \" \", user.username), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, !this.state.approved && React.createElement(\"button\", {\n      type: \"button\",\n      onClick: this.onApproveUser,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, \"Approve User\")), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      onClick: this.onSendPasswordResetEmail,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, \"Send Password Reset\"), this.state.sentReset && React.createElement(\"div\", {\n      style: {\n        color: \"red\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, \"Password reset sent\"))));\n  }\n\n}\n\nclass PrayersBase extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChangeText = event => {\n      this.setState({\n        text: event.target.value\n      });\n    };\n\n    this.onChangeCheckbox = event => {\n      this.setState({\n        [event.target.name]: event.target.checked\n      });\n    };\n\n    this.onCreatePrayer = (event, authUser) => {\n      this.props.firebase.prayers().push({\n        text: this.state.text,\n        userId: authUser.uid,\n        username: authUser.username,\n        isAnonymous: this.state.isAnonymous,\n        createdAt: this.props.firebase.serverValue.TIMESTAMP\n      });\n      this.setState({\n        text: \"\"\n      });\n      event.preventDefault();\n    };\n\n    this.onEditPrayer = (prayer, text) => {\n      const uid = prayer.uid,\n            prayerSnapshot = _objectWithoutProperties(prayer, [\"uid\"]);\n\n      this.props.firebase.prayer(prayer.uid).set(_objectSpread({}, prayerSnapshot, {\n        text,\n        editedAt: this.props.firebase.serverValue.TIMESTAMP\n      }));\n    };\n\n    this.onRemovePrayer = uid => {\n      this.props.firebase.prayer(uid).remove();\n    };\n\n    this.onNextPage = () => {\n      this.setState(state => ({\n        limit: state.limit + 5\n      }), this.onListenForPrayers);\n    };\n\n    this.state = {\n      text: \"\",\n      isAnonymous: false,\n      loading: false,\n      prayers: [],\n      limit: 5,\n      reply: null //becomes id of message\n\n    };\n  }\n\n  componentDidMount() {\n    this.onListenForPrayers();\n  }\n\n  onListenForPrayers() {\n    this.setState({\n      loading: true\n    });\n    this.props.firebase.prayers().orderByChild(\"createdAt\").limitToLast(this.state.limit).on(\"value\", snapshot => {\n      const prayerObject = snapshot.val();\n\n      if (prayerObject) {\n        const prayerList = Object.keys(prayerObject).map(key => _objectSpread({}, prayerObject[key], {\n          uid: key\n        })); // convert prayers list from snapshot\n\n        this.setState({\n          prayers: prayerList,\n          loading: false\n        });\n      } else {\n        this.setState({\n          prayers: null,\n          loading: false\n        });\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    this.props.firebase.prayers().off();\n  }\n\n  render() {\n    const _this$state3 = this.state,\n          text = _this$state3.text,\n          isAnonymous = _this$state3.isAnonymous,\n          prayers = _this$state3.prayers,\n          loading = _this$state3.loading;\n    const isInvalid = text === \"\";\n    return React.createElement(AuthUserContext.Consumer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303\n      },\n      __self: this\n    }, authUser => React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305\n      },\n      __self: this\n    }, !loading && prayers && React.createElement(\"button\", {\n      type: \"button\",\n      onClick: this.onNextPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308\n      },\n      __self: this\n    }, \"More\"), loading && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313\n      },\n      __self: this\n    }, \"Loading ...\"), prayers ? React.createElement(PrayerList, {\n      authUser: authUser,\n      prayers: prayers,\n      onEditPrayer: this.onEditPrayer,\n      onRemovePrayer: this.onRemovePrayer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316\n      },\n      __self: this\n    }) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323\n      },\n      __self: this\n    }, \"There are no prayer requests ...\"), React.createElement(\"form\", {\n      onSubmit: event => this.onCreatePrayer(event, authUser),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      name: \"prayer\",\n      type: \"text\",\n      value: text,\n      onChange: this.onChangeText,\n      placeholder: \"Send a prayer request...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334\n      },\n      __self: this\n    }, \"Send Anonymously:\", \" \", React.createElement(\"input\", {\n      name: \"isAnonymous\",\n      type: \"checkbox\",\n      checked: isAnonymous,\n      onChange: this.onChangeCheckbox,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336\n      },\n      __self: this\n    }), \" \"), React.createElement(\"button\", {\n      disabled: isInvalid,\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343\n      },\n      __self: this\n    }, \"Send\"))));\n  }\n\n}\n\nconst condition = authUser => authUser && !!authUser.roles[ROLES.ADMIN];\n\nconst UserList = withFirebase(UserListBase);\nconst UserItem = withFirebase(UserItemBase);\n/*const UserItem = ({ match }) => (\r\n  <div>\r\n    <h2>User ({match.params.id})</h2>\r\n  </div>\r\n);*/\n\nexport default compose(withAuthorization(condition), withFirebase)(AdminPage);","map":{"version":3,"sources":["C:\\Users\\moonl\\Documents\\GitHub\\Berryessa-App\\react\\src\\components\\Admin\\index.js"],"names":["React","Component","Switch","Route","Link","compose","withFirebase","AuthUserContext","withAuthorization","ROLES","ROUTES","PrayerList","AdminPage","ADMIN_DETAILS","UserItem","ADMIN","UserList","UserListBase","constructor","props","state","loading","users","componentDidMount","setState","firebase","on","snapshot","usersObject","val","usersList","Object","keys","map","key","uid","componentWillUnmount","off","render","user","email","username","roles","APPROVED","color","pathname","UserItemBase","onSendPasswordResetEmail","doPasswordReset","sentReset","onApproveUser","db","ref","match","params","id","update","approved","location","console","log","PrayersBase","onChangeText","event","text","target","value","onChangeCheckbox","name","checked","onCreatePrayer","authUser","prayers","push","userId","isAnonymous","createdAt","serverValue","TIMESTAMP","preventDefault","onEditPrayer","prayer","prayerSnapshot","set","editedAt","onRemovePrayer","remove","onNextPage","limit","onListenForPrayers","reply","orderByChild","limitToLast","prayerObject","prayerList","isInvalid","condition"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Switch, Route, Link } from \"react-router-dom\";\r\nimport { compose } from \"recompose\";\r\n\r\nimport { withFirebase } from \"../Firebase\";\r\nimport { AuthUserContext, withAuthorization } from \"../Session\";\r\nimport * as ROLES from \"../../constants/roles\";\r\nimport * as ROUTES from \"../../constants/routes\";\r\n\r\nimport { PrayerList } from \"../Prayer\";\r\n\r\nconst AdminPage = () => (\r\n  <div>\r\n    <h1>Admin</h1>\r\n    <p>The Admin Page is accessible by every signed in admin user.</p>\r\n    <PrayersBase />\r\n    <Switch>\r\n      <Route exact path={ROUTES.ADMIN_DETAILS} component={UserItem} />\r\n      <Route exact path={ROUTES.ADMIN} component={UserList} />\r\n    </Switch>\r\n  </div>\r\n);\r\n\r\nclass UserListBase extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      loading: false,\r\n      users: []\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ loading: true });\r\n\r\n    this.props.firebase.users().on(\"value\", snapshot => {\r\n      const usersObject = snapshot.val();\r\n\r\n      const usersList = Object.keys(usersObject).map(key => ({\r\n        ...usersObject[key],\r\n        uid: key\r\n      }));\r\n\r\n      this.setState({\r\n        users: usersList,\r\n        loading: false\r\n      });\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.firebase.users().off();\r\n  }\r\n\r\n  render() {\r\n    const { users, loading } = this.state;\r\n\r\n    return (\r\n      <div>\r\n        <h2>Users</h2>\r\n        {loading && <div>Loading...</div>}\r\n\r\n        <ul>\r\n          {users.map(user => (\r\n            <li key={user.uid}>\r\n              <span>\r\n                <strong>ID:</strong> {user.uid}\r\n              </span>\r\n              <span>\r\n                <strong> | E-Mail:</strong> {user.email}\r\n              </span>\r\n              <span>\r\n                <strong> | Username:</strong> {user.username}\r\n              </span>\r\n              <span>\r\n                <strong> | Approved: </strong>{\" \"}\r\n                {user.roles.APPROVED ? (\r\n                  <div style={{ color: \"green\" }}>TRUE</div>\r\n                ) : (\r\n                  <div style={{ color: \"red\" }}>FALSE</div>\r\n                )}\r\n              </span>\r\n              <span>\r\n                <Link\r\n                  to={{\r\n                    pathname: `${ROUTES.ADMIN}/${user.uid}`,\r\n                    state: { user }\r\n                  }}\r\n                >\r\n                  {\" \"}\r\n                  Details\r\n                </Link>\r\n              </span>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass UserItemBase extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      loading: false,\r\n      user: null,\r\n      sentReset: false,\r\n      approved: false,\r\n      ...props.location.state\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    console.log(\"hello\");\r\n\r\n    if (this.state.user) {\r\n      this.setState({\r\n        approved: this.state.user.roles.APPROVED\r\n      });\r\n      return;\r\n    }\r\n\r\n    this.setState({ loading: true });\r\n\r\n    this.props.firebase\r\n      .user(this.props.match.params.id)\r\n      .on(\"value\", snapshot => {\r\n        this.setState({\r\n          user: snapshot.val(),\r\n          loading: false,\r\n          approved: snapshot.val().roles.APPROVED\r\n        });\r\n      });\r\n\r\n    this.setState({\r\n      approved: this.state.user.roles.APPROVED\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.firebase.user(this.props.match.params.id).off();\r\n  }\r\n\r\n  onSendPasswordResetEmail = () => {\r\n    this.props.firebase.doPasswordReset(this.state.user.email);\r\n    this.setState({\r\n      sentReset: true\r\n    });\r\n  };\r\n\r\n  onApproveUser = () => {\r\n    this.props.firebase.db\r\n      .ref(`users/${this.props.match.params.id}/roles/`)\r\n      .update({ APPROVED: \"APPROVED\" });\r\n\r\n    this.setState({\r\n      approved: true\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { user, loading } = this.state;\r\n\r\n    return (\r\n      <div>\r\n        <h2>User ({this.props.match.params.id})</h2>\r\n        {loading && <div>Loading ...</div>}\r\n\r\n        {user && (\r\n          <div>\r\n            <span>\r\n              <strong>ID: </strong> {this.props.match.params.id}\r\n            </span>\r\n            <span>\r\n              <strong> | E-Mail:</strong> {user.email}\r\n            </span>\r\n            <span>\r\n              <strong> | Username:</strong> {user.username}\r\n            </span>\r\n            <span>\r\n              {!this.state.approved && (\r\n                <button type=\"button\" onClick={this.onApproveUser}>\r\n                  Approve User\r\n                </button>\r\n              )}\r\n            </span>\r\n            <span>\r\n              <button type=\"button\" onClick={this.onSendPasswordResetEmail}>\r\n                Send Password Reset\r\n              </button>\r\n              {this.state.sentReset && (\r\n                <div style={{ color: \"red\" }}>Password reset sent</div>\r\n              )}\r\n            </span>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass PrayersBase extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      text: \"\",\r\n      isAnonymous: false,\r\n      loading: false,\r\n      prayers: [],\r\n      limit: 5,\r\n      reply: null //becomes id of message\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.onListenForPrayers();\r\n  }\r\n\r\n  onListenForPrayers() {\r\n    this.setState({ loading: true });\r\n\r\n    this.props.firebase\r\n      .prayers()\r\n      .orderByChild(\"createdAt\")\r\n      .limitToLast(this.state.limit)\r\n      .on(\"value\", snapshot => {\r\n        const prayerObject = snapshot.val();\r\n\r\n        if (prayerObject) {\r\n          const prayerList = Object.keys(prayerObject).map(key => ({\r\n            ...prayerObject[key],\r\n            uid: key\r\n          }));\r\n          // convert prayers list from snapshot\r\n\r\n          this.setState({\r\n            prayers: prayerList,\r\n            loading: false\r\n          });\r\n        } else {\r\n          this.setState({ prayers: null, loading: false });\r\n        }\r\n      });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.firebase.prayers().off();\r\n  }\r\n\r\n  onChangeText = event => {\r\n    this.setState({ text: event.target.value });\r\n  };\r\n\r\n  onChangeCheckbox = event => {\r\n    this.setState({ [event.target.name]: event.target.checked });\r\n  };\r\n\r\n  onCreatePrayer = (event, authUser) => {\r\n    this.props.firebase.prayers().push({\r\n      text: this.state.text,\r\n      userId: authUser.uid,\r\n      username: authUser.username,\r\n      isAnonymous: this.state.isAnonymous,\r\n      createdAt: this.props.firebase.serverValue.TIMESTAMP\r\n    });\r\n\r\n    this.setState({ text: \"\" });\r\n\r\n    event.preventDefault();\r\n  };\r\n\r\n  onEditPrayer = (prayer, text) => {\r\n    const { uid, ...prayerSnapshot } = prayer;\r\n\r\n    this.props.firebase.prayer(prayer.uid).set({\r\n      ...prayerSnapshot,\r\n      text,\r\n      editedAt: this.props.firebase.serverValue.TIMESTAMP\r\n    });\r\n  };\r\n\r\n  onRemovePrayer = uid => {\r\n    this.props.firebase.prayer(uid).remove();\r\n  };\r\n\r\n  onNextPage = () => {\r\n    this.setState(\r\n      state => ({ limit: state.limit + 5 }),\r\n      this.onListenForPrayers\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { text, isAnonymous, prayers, loading } = this.state;\r\n\r\n    const isInvalid = text === \"\";\r\n\r\n    return (\r\n      <AuthUserContext.Consumer>\r\n        {authUser => (\r\n          <div>\r\n            {!loading &&\r\n              prayers && (\r\n                <button type=\"button\" onClick={this.onNextPage}>\r\n                  More\r\n                </button>\r\n              )}\r\n\r\n            {loading && <div>Loading ...</div>}\r\n\r\n            {prayers ? (\r\n              <PrayerList\r\n                authUser={authUser}\r\n                prayers={prayers}\r\n                onEditPrayer={this.onEditPrayer}\r\n                onRemovePrayer={this.onRemovePrayer}\r\n              />\r\n            ) : (\r\n              <div>There are no prayer requests ...</div>\r\n            )}\r\n\r\n            <form onSubmit={event => this.onCreatePrayer(event, authUser)}>\r\n              <input\r\n                name=\"prayer\"\r\n                type=\"text\"\r\n                value={text}\r\n                onChange={this.onChangeText}\r\n                placeholder=\"Send a prayer request...\"\r\n              />\r\n              <label>\r\n                Send Anonymously:{\" \"}\r\n                <input\r\n                  name=\"isAnonymous\"\r\n                  type=\"checkbox\"\r\n                  checked={isAnonymous}\r\n                  onChange={this.onChangeCheckbox}\r\n                />{\" \"}\r\n              </label>\r\n              <button disabled={isInvalid} type=\"submit\">\r\n                Send\r\n              </button>\r\n            </form>\r\n          </div>\r\n        )}\r\n      </AuthUserContext.Consumer>\r\n    );\r\n  }\r\n}\r\n\r\nconst condition = authUser => authUser && !!authUser.roles[ROLES.ADMIN];\r\n\r\nconst UserList = withFirebase(UserListBase);\r\nconst UserItem = withFirebase(UserItemBase);\r\n\r\n/*const UserItem = ({ match }) => (\r\n  <div>\r\n    <h2>User ({match.params.id})</h2>\r\n  </div>\r\n);*/\r\n\r\nexport default compose(withAuthorization(condition), withFirebase)(AdminPage);\r\n"]},"metadata":{},"sourceType":"module"}