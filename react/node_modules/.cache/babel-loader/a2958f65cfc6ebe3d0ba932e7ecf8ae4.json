{"ast":null,"code":"import _objectSpread from \"/Users/kyle/workspace/Projects/Berryessa-App/react/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/kyle/workspace/Projects/Berryessa-App/react/src/components/Admin/index.js\";\nimport React, { Component } from \"react\";\nimport { Switch, Route, Link } from \"react-router-dom\";\nimport { compose } from \"recompose\";\nimport { withFirebase } from \"../Firebase\";\nimport { withAuthorization } from \"../Session\";\nimport * as ROLES from \"../../constants/roles\";\nimport * as ROUTES from \"../../constants/routes\";\n\nconst AdminPage = () => React.createElement(\"div\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 11\n  },\n  __self: this\n}, React.createElement(\"h1\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 12\n  },\n  __self: this\n}, \"Admin\"), React.createElement(\"p\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 13\n  },\n  __self: this\n}, \"The Admin Page is accessible by every signed in admin user.\"), React.createElement(Switch, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 15\n  },\n  __self: this\n}, React.createElement(Route, {\n  exact: true,\n  path: ROUTES.ADMIN_DETAILS,\n  component: UserItem,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 16\n  },\n  __self: this\n}), React.createElement(Route, {\n  exact: true,\n  path: ROUTES.ADMIN,\n  component: UserList,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 17\n  },\n  __self: this\n})));\n\nclass UserListBase extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n      users: []\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      loading: true\n    });\n    this.props.firebase.users().on(\"value\", snapshot => {\n      const usersObject = snapshot.val();\n      const usersList = Object.keys(usersObject).map(key => _objectSpread({}, usersObject[key], {\n        uid: key\n      }));\n      this.setState({\n        users: usersList,\n        loading: false\n      });\n    });\n  }\n\n  componentWillUnmount() {\n    this.props.firebase.users().off();\n  }\n\n  render() {\n    const _this$state = this.state,\n          users = _this$state.users,\n          loading = _this$state.loading;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, \"Users\"), loading && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, \"Loading...\"), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, users.map(user => React.createElement(\"li\", {\n      key: user.uid,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"ID:\"), \" \", user.uid), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \" | E-Mail:\"), \" \", user.email), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, \" | Username:\"), \" \", user.username, \" |\"), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: {\n        pathname: \"\".concat(ROUTES.ADMIN, \"/\").concat(user.uid),\n        state: {\n          user\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"Details\"))))));\n  }\n\n}\n\nclass UserItemBase extends Component {\n  constructor(props) {\n    super(props);\n    this.state = _objectSpread({\n      loading: false,\n      user: null\n    }, props.location.state);\n  }\n\n  componentDidMount() {\n    if (this.state.user) {\n      return;\n    }\n\n    this.setState({\n      loading: true\n    });\n    this.props.firebase.user(this.props.match.params.id).on(\"value\", snapshot => {\n      this.setState({\n        user: snapshot.val(),\n        loading: false\n      });\n    });\n  }\n\n  componentWillUnmount() {\n    this.props.firebase.user(this.props.match.params.id).off();\n  }\n\n  render() {\n    const _this$state2 = this.state,\n          user = _this$state2.user,\n          loading = _this$state2.loading;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \"User (\", this.props.match.params.id, \")\"), loading && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, \"Loading ...\"), user && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, \"ID: \"), \" \", this.props.match.params.id), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, \" | E-Mail:\"), \" \", user.email), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \" | Username:\"), \" \", user.username)));\n  }\n\n}\n\nconst condition = authUser => authUser && !!authUser.roles[ROLES.ADMIN];\n\nconst UserList = withFirebase(UserListBase);\nconst UserItem = withFirebase(UserItemBase);\n/*const UserItem = ({ match }) => (\n  <div>\n    <h2>User ({match.params.id})</h2>\n  </div>\n);*/\n\nexport default compose(withAuthorization(condition), withFirebase)(AdminPage);","map":{"version":3,"sources":["/Users/kyle/workspace/Projects/Berryessa-App/react/src/components/Admin/index.js"],"names":["React","Component","Switch","Route","Link","compose","withFirebase","withAuthorization","ROLES","ROUTES","AdminPage","ADMIN_DETAILS","UserItem","ADMIN","UserList","UserListBase","constructor","props","state","loading","users","componentDidMount","setState","firebase","on","snapshot","usersObject","val","usersList","Object","keys","map","key","uid","componentWillUnmount","off","render","user","email","username","pathname","UserItemBase","location","match","params","id","condition","authUser","roles"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Switch, Route, Link } from \"react-router-dom\";\nimport { compose } from \"recompose\";\n\nimport { withFirebase } from \"../Firebase\";\nimport { withAuthorization } from \"../Session\";\nimport * as ROLES from \"../../constants/roles\";\nimport * as ROUTES from \"../../constants/routes\";\n\nconst AdminPage = () => (\n  <div>\n    <h1>Admin</h1>\n    <p>The Admin Page is accessible by every signed in admin user.</p>\n\n    <Switch>\n      <Route exact path={ROUTES.ADMIN_DETAILS} component={UserItem} />\n      <Route exact path={ROUTES.ADMIN} component={UserList} />\n    </Switch>\n  </div>\n);\n\nclass UserListBase extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      loading: false,\n      users: []\n    };\n  }\n\n  componentDidMount() {\n    this.setState({ loading: true });\n\n    this.props.firebase.users().on(\"value\", snapshot => {\n      const usersObject = snapshot.val();\n\n      const usersList = Object.keys(usersObject).map(key => ({\n        ...usersObject[key],\n        uid: key\n      }));\n\n      this.setState({\n        users: usersList,\n        loading: false\n      });\n    });\n  }\n\n  componentWillUnmount() {\n    this.props.firebase.users().off();\n  }\n\n  render() {\n    const { users, loading } = this.state;\n\n    return (\n      <div>\n        <h2>Users</h2>\n        {loading && <div>Loading...</div>}\n\n        <ul>\n          {users.map(user => (\n            <li key={user.uid}>\n              <span>\n                <strong>ID:</strong> {user.uid}\n              </span>\n              <span>\n                <strong> | E-Mail:</strong> {user.email}\n              </span>\n              <span>\n                <strong> | Username:</strong> {user.username} |\n              </span>\n              <span>\n                <Link\n                  to={{\n                    pathname: `${ROUTES.ADMIN}/${user.uid}`,\n                    state: { user }\n                  }}\n                >\n                  Details\n                </Link>\n              </span>\n            </li>\n          ))}\n        </ul>\n      </div>\n    );\n  }\n}\n\nclass UserItemBase extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      loading: false,\n      user: null,\n      ...props.location.state\n    };\n  }\n\n  componentDidMount() {\n    if (this.state.user) {\n      return;\n    }\n\n    this.setState({ loading: true });\n\n    this.props.firebase\n      .user(this.props.match.params.id)\n      .on(\"value\", snapshot => {\n        this.setState({\n          user: snapshot.val(),\n          loading: false\n        });\n      });\n  }\n\n  componentWillUnmount() {\n    this.props.firebase.user(this.props.match.params.id).off();\n  }\n\n  render() {\n    const { user, loading } = this.state;\n\n    return (\n      <div>\n        <h2>User ({this.props.match.params.id})</h2>\n        {loading && <div>Loading ...</div>}\n\n        {user && (\n          <div>\n            <span>\n              <strong>ID: </strong> {this.props.match.params.id}\n            </span>\n            <span>\n              <strong> | E-Mail:</strong> {user.email}\n            </span>\n            <span>\n              <strong> | Username:</strong> {user.username}\n            </span>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nconst condition = authUser => authUser && !!authUser.roles[ROLES.ADMIN];\n\nconst UserList = withFirebase(UserListBase);\nconst UserItem = withFirebase(UserItemBase);\n\n/*const UserItem = ({ match }) => (\n  <div>\n    <h2>User ({match.params.id})</h2>\n  </div>\n);*/\n\nexport default compose(\n  withAuthorization(condition),\n  withFirebase\n)(AdminPage);\n"]},"metadata":{},"sourceType":"module"}