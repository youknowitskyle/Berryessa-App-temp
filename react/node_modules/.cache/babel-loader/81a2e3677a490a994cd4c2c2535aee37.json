{"ast":null,"code":"var _jsxFileName = \"/Users/kyle/workspace/React/firebase-tutorial/src/components/Session/withEmailVerification.js\";\nimport React from \"react\";\nimport AuthUserContext from \"./context\";\nimport { withFirebase } from \"../Firebase\";\n\nconst needsEmailVerification = authUSer => authUser && !authUser.emailVerified && authUser.providerData.map(provider => provider.providerId).includes(\"password\");\n\nconst withEmailVerification = Component => {\n  class WithEmailVerification extends React.Component {\n    constructor(props) {\n      super(props);\n\n      this.onSendEmailVerification = () => {\n        this.props.firebase.doSendEmailVerification().then(() => this.setState({\n          isSent: true\n        }));\n      };\n\n      this.state = {\n        isSent: false\n      };\n    }\n\n    render() {\n      return React.createElement(AuthUserContext.Consumer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29\n        },\n        __self: this\n      }, authUser => needsEmailVerification(authUser) ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32\n        },\n        __self: this\n      }, this.state.isSent ? React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34\n        },\n        __self: this\n      }, \"Email confirmation sent: Check your emails (including spam folder) for a confirmation email. Refresh this page once you have confirmed your email.\") : React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      }, \"Verify your E-Mail: Check your email (including your spam folder) for a confirmation email or click below to send another confirmation email.\"), React.createElement(\"button\", {\n        type: \"button\",\n        onClick: this.onSendEmailVerification,\n        disabled: this.state.isSent,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, \"Send confirmation email\")) : React.createElement(Component, Object.assign({}, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      })));\n    }\n\n  }\n\n  return withFirebase(WithEmailVerification);\n};\n\nexport default withEmailVerification;","map":{"version":3,"sources":["/Users/kyle/workspace/React/firebase-tutorial/src/components/Session/withEmailVerification.js"],"names":["React","AuthUserContext","withFirebase","needsEmailVerification","authUSer","authUser","emailVerified","providerData","map","provider","providerId","includes","withEmailVerification","Component","WithEmailVerification","constructor","props","onSendEmailVerification","firebase","doSendEmailVerification","then","setState","isSent","state","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAOC,eAAP,MAA4B,WAA5B;AACA,SAASC,YAAT,QAA6B,aAA7B;;AAEA,MAAMC,sBAAsB,GAAGC,QAAQ,IACrCC,QAAQ,IACR,CAACA,QAAQ,CAACC,aADV,IAEAD,QAAQ,CAACE,YAAT,CACGC,GADH,CACOC,QAAQ,IAAIA,QAAQ,CAACC,UAD5B,EAEGC,QAFH,CAEY,UAFZ,CAHF;;AAOA,MAAMC,qBAAqB,GAAGC,SAAS,IAAI;AACzC,QAAMC,qBAAN,SAAoCd,KAAK,CAACa,SAA1C,CAAoD;AAClDE,IAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,YAAMA,KAAN;;AADiB,WAMnBC,uBANmB,GAMO,MAAM;AAC9B,aAAKD,KAAL,CAAWE,QAAX,CACGC,uBADH,GAEGC,IAFH,CAEQ,MAAM,KAAKC,QAAL,CAAc;AAAEC,UAAAA,MAAM,EAAE;AAAV,SAAd,CAFd;AAGD,OAVkB;;AAGjB,WAAKC,KAAL,GAAa;AAAED,QAAAA,MAAM,EAAE;AAAV,OAAb;AACD;;AAQDE,IAAAA,MAAM,GAAG;AACP,aACE,oBAAC,eAAD,CAAiB,QAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGnB,QAAQ,IACPF,sBAAsB,CAACE,QAAD,CAAtB,GACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAKkB,KAAL,CAAWD,MAAX,GACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8JADD,GAOC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yJARJ,EAeE;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,OAAO,EAAE,KAAKL,uBAFhB;AAGE,QAAA,QAAQ,EAAE,KAAKM,KAAL,CAAWD,MAHvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAfF,CADF,GAyBE,oBAAC,SAAD,oBAAe,KAAKN,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SA3BN,CADF;AAiCD;;AA/CiD;;AAkDpD,SAAOd,YAAY,CAACY,qBAAD,CAAnB;AACD,CApDD;;AAsDA,eAAeF,qBAAf","sourcesContent":["import React from \"react\";\n\nimport AuthUserContext from \"./context\";\nimport { withFirebase } from \"../Firebase\";\n\nconst needsEmailVerification = authUSer =>\n  authUser &&\n  !authUser.emailVerified &&\n  authUser.providerData\n    .map(provider => provider.providerId)\n    .includes(\"password\");\n\nconst withEmailVerification = Component => {\n  class WithEmailVerification extends React.Component {\n    constructor(props) {\n      super(props);\n\n      this.state = { isSent: false };\n    }\n\n    onSendEmailVerification = () => {\n      this.props.firebase\n        .doSendEmailVerification()\n        .then(() => this.setState({ isSent: true }));\n    };\n\n    render() {\n      return (\n        <AuthUserContext.Consumer>\n          {authUser =>\n            needsEmailVerification(authUser) ? (\n              <div>\n                {this.state.isSent ? (\n                  <p>\n                    Email confirmation sent: Check your emails (including spam\n                    folder) for a confirmation email. Refresh this page once you\n                    have confirmed your email.\n                  </p>\n                ) : (\n                  <p>\n                    Verify your E-Mail: Check your email (including your spam\n                    folder) for a confirmation email or click below to send\n                    another confirmation email.\n                  </p>\n                )}\n\n                <button\n                  type=\"button\"\n                  onClick={this.onSendEmailVerification}\n                  disabled={this.state.isSent}\n                >\n                  Send confirmation email\n                </button>\n              </div>\n            ) : (\n              <Component {...this.props} />\n            )\n          }\n        </AuthUserContext.Consumer>\n      );\n    }\n  }\n\n  return withFirebase(WithEmailVerification);\n};\n\nexport default withEmailVerification;\n"]},"metadata":{},"sourceType":"module"}